<!DOCTYPE html><html lang="zh-CN"><head><meta name="x-poe-datastore-behavior" content="local_only"><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªè£…é¢„ç®—è‡ªåŠ¨è®¡ç®—å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Microsoft YaHei", "SimSun", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .controls {
            background: #f8f9fa;
            padding: 25px;
            border-bottom: 3px solid #667eea;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-group label {
            font-weight: 600;
            color: #333;
            white-space: nowrap;
        }
        
        .control-group select,
        .control-group input {
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            min-width: 150px;
            transition: all 0.3s;
        }
        
        .control-group select:focus,
        .control-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn {
            padding: 10px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 25px;
            background: #f8f9fa;
        }
        
        .summary-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .summary-card h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .summary-card .amount {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
        
        .summary-card .percentage {
            font-size: 14px;
            color: #999;
        }
        
        .table-container {
            padding: 25px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 10px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        td {
            padding: 12px 10px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 13px;
        }
        
        tr:hover {
            background: #f8f9ff;
        }
        
        .category-row {
            background: #f8f9fa !important;
            font-weight: bold;
            font-size: 14px;
        }
        
        .category-row td {
            padding: 15px 10px;
            border-top: 2px solid #ddd;
            border-bottom: 2px solid #ddd;
        }
        
        .subtotal-row {
            background: #e8f5e9 !important;
            font-weight: 600;
        }
        
        .total-row {
            background: #667eea !important;
            color: white !important;
            font-weight: bold;
            font-size: 15px;
        }
        
        .total-row td {
            padding: 18px 10px;
        }
        
        input[type="number"] {
            width: 80px;
            padding: 6px 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: right;
            font-size: 13px;
        }
        
        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .editable {
            background: #fffde7;
        }
        
        .calculated {
            font-weight: 600;
            color: #667eea;
        }
        
        .export-section {
            padding: 25px;
            background: #f8f9fa;
            border-top: 3px solid #667eea;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .tips-section {
            padding: 25px;
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            margin: 25px;
            border-radius: 8px;
        }
        
        .tips-section h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }
        
        .tips-section ul {
            margin-left: 20px;
        }
        
        .tips-section li {
            margin: 8px 0;
            color: #555;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .controls, .export-section, .btn {
                display: none;
            }
            
            .container {
                box-shadow: none;
            }
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 24px;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
            
            table {
                font-size: 11px;
            }
            
            th, td {
                padding: 8px 5px;
            }
            
            input[type="number"] {
                width: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ  è‡ªè£…é¢„ç®—è‡ªåŠ¨è®¡ç®—å™¨</h1>
            <p>å®æ—¶è®¡ç®— â€¢ è‡ªç”±ç¼–è¾‘ â€¢ å¯¼å‡ºExcel â€¢ ä¸“ä¸šé¢„ç®—è§„åˆ’</p>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>ğŸ˜ï¸ å»ºç­‘é¢ç§¯ï¼š</label>
                <input type="number" id="area" value="100" min="50" max="200" step="1">
                <span>ã¡</span>
            </div>
            
            <div class="control-group">
                <label>ğŸ’ è£…ä¿®æ¡£æ¬¡ï¼š</label>
                <select id="level">
                    <option value="economy">ç»æµå‹ï¼ˆ800-1100å…ƒ/ã¡ï¼‰</option>
                    <option value="comfort" selected="">èˆ’é€‚å‹ï¼ˆ1200-1600å…ƒ/ã¡ï¼‰</option>
                    <option value="luxury">ç²¾è£…å‹ï¼ˆ1800-2500å…ƒ/ã¡ï¼‰</option>
                </select>
            </div>
            
            <button class="btn" onclick="resetDefault()">â†º æ¢å¤é»˜è®¤</button>
            <button class="btn" onclick="exportToExcel()">ğŸ“Š å¯¼å‡ºExcel</button>
            <button class="btn" onclick="window.print()">ğŸ–¨ï¸ æ‰“å°é¢„ç®—è¡¨</button>
        </div>
        
        <div class="summary-cards">
            <div class="summary-card">
                <h3>æ€»é¢„ç®—</h3>
                <div class="amount" id="totalBudget">0</div>
                <div class="percentage">100%</div>
            </div>
            <div class="summary-card">
                <h3>äººå·¥è´¹</h3>
                <div class="amount" id="laborTotal">0</div>
                <div class="percentage" id="laborPercent">0%</div>
            </div>
            <div class="summary-card">
                <h3>è¾…æè´¹</h3>
                <div class="amount" id="auxTotal">0</div>
                <div class="percentage" id="auxPercent">0%</div>
            </div>
            <div class="summary-card">
                <h3>ä¸»æè´¹</h3>
                <div class="amount" id="mainTotal">0</div>
                <div class="percentage" id="mainPercent">0%</div>
            </div>
            <div class="summary-card">
                <h3>å…¶ä»–è´¹ç”¨</h3>
                <div class="amount" id="otherTotal">0</div>
                <div class="percentage" id="otherPercent">0%</div>
            </div>
            <div class="summary-card">
                <h3>å¹³ç±³å•ä»·</h3>
                <div class="amount" id="pricePerSqm">0</div>
                <div class="percentage">å…ƒ/ã¡</div>
            </div>
        </div>
        
        <div class="table-container">
            <table id="budgetTable">
                <thead>
                    <tr>
                        <th style="width: 5%;">åºå·</th>
                        <th style="width: 20%;">é¡¹ç›®åç§°</th>
                        <th style="width: 8%;">å•ä½</th>
                        <th style="width: 10%;">å·¥ç¨‹é‡</th>
                        <th style="width: 12%;">å•ä»·ï¼ˆå…ƒï¼‰</th>
                        <th style="width: 12%;">å°è®¡ï¼ˆå…ƒï¼‰</th>
                        <th style="width: 33%;">å¤‡æ³¨è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- è¡¨æ ¼å†…å®¹å°†ç”±JavaScriptç”Ÿæˆ -->
                </tbody>
            </table>
        </div>
        
        <div class="tips-section">
            <h3>ğŸ’¡ ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li><strong>ä¿®æ”¹é¢ç§¯ï¼š</strong>åœ¨é¡¶éƒ¨è¾“å…¥å®é™…å»ºç­‘é¢ç§¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŒ‰æ¯”ä¾‹è°ƒæ•´å·¥ç¨‹é‡å’Œæ€»é¢„ç®—</li>
                <li><strong>åˆ‡æ¢æ¡£æ¬¡ï¼š</strong>é€‰æ‹©ä¸åŒè£…ä¿®æ¡£æ¬¡ï¼Œå•ä»·ä¼šè‡ªåŠ¨æ›´æ–°</li>
                <li><strong>æ‰‹åŠ¨ç¼–è¾‘ï¼š</strong>é»„è‰²å•å…ƒæ ¼å¯ä»¥ç›´æ¥ä¿®æ”¹ï¼Œä¿®æ”¹åä¼šè‡ªåŠ¨é‡æ–°è®¡ç®—æ€»ä»·</li>
                <li><strong>å¯¼å‡ºExcelï¼š</strong>ç‚¹å‡»"å¯¼å‡ºExcel"æŒ‰é’®ï¼Œç”ŸæˆCSVæ–‡ä»¶ï¼Œå¯ç”¨Excelæ‰“å¼€</li>
                <li><strong>æ‰“å°ä¿å­˜ï¼š</strong>ç‚¹å‡»"æ‰“å°é¢„ç®—è¡¨"å¯ä»¥ä¿å­˜ä¸ºPDFæˆ–æ‰“å°</li>
                <li><strong>æ¢å¤é»˜è®¤ï¼š</strong>ç‚¹å‡»"æ¢å¤é»˜è®¤"å¯ä»¥é‡ç½®æ‰€æœ‰æ•°æ®</li>
            </ul>
        </div>
        
        <div class="export-section">
            <button class="btn" onclick="saveToLocalStorage()">ğŸ’¾ ä¿å­˜å½“å‰é¢„ç®—</button>
            <button class="btn" onclick="loadFromLocalStorage()">ğŸ“‚ åŠ è½½å·²ä¿å­˜é¢„ç®—</button>
            <button class="btn" onclick="clearLocalStorage()">ğŸ—‘ï¸ æ¸…é™¤ä¿å­˜æ•°æ®</button>
        </div>
        
        <div style="padding: 25px; text-align: center; color: #999; font-size: 13px; border-top: 1px solid #eee;">
            <p>æœ¬é¢„ç®—è¡¨åŸºäº2026å¹´1æœˆå¸‚åœºä»·æ ¼ç¼–åˆ¶ï¼Œä»·æ ¼ä¼šéšå¸‚åœºæ³¢åŠ¨ï¼Œä»…ä¾›å‚è€ƒ</p>
            <p style="margin-top: 8px;">å»ºè®®ï¼šé¢„ç•™æ€»é¢„ç®—çš„10%ä½œä¸ºæœºåŠ¨è´¹ç”¨ï¼Œåº”å¯¹çªå‘æƒ…å†µ</p>
        </div>
    </div>
    
    <script>
        // åŸºç¡€é¢„ç®—æ•°æ®ç»“æ„ï¼ˆåŸºäº100å¹³ç±³ï¼‰
        const baseData = {
            economy: {
                // äººå·¥è´¹
                demolition: { name: 'æ‹†é™¤æ¸…è¿', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 3000, note: 'å¢™ä½“æ‹†é™¤ã€åœ°é¢ç –æ‹†é™¤ã€åƒåœ¾æ¸…è¿' },
                electrical: { name: 'æ°´ç”µæ”¹é€ ', unit: 'ã¡', baseQuantity: 100, quantityType: 'area', price: 80, note: 'å¼ºç”µã€å¼±ç”µã€æ°´è·¯æ”¹é€ ã€é˜²æ°´' },
                masonry: { name: 'æ³¥å·¥æ–½å·¥', unit: 'ã¡', baseQuantity: 75, quantityType: 'ratio', price: 75, note: 'åœ°é¢æ‰¾å¹³ã€å¢™åœ°ç –é“ºè´´ã€ç Œå¢™' },
                carpentry: { name: 'æœ¨å·¥æ–½å·¥', unit: 'ã¡', baseQuantity: 40, quantityType: 'ratio', price: 90, note: 'åŠé¡¶ã€èƒŒæ™¯å¢™é€ å‹' },
                painting: { name: 'æ²¹æ¼†æ–½å·¥', unit: 'ã¡', baseQuantity: 230, quantityType: 'ratio', price: 28, note: 'å¢™é¢åŸºå±‚å¤„ç†ã€ä¹³èƒ¶æ¼†æ–½å·¥' },
                installation: { name: 'å®‰è£…ç±»', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 1200, note: 'æ´å…·ã€ç¯å…·ã€äº”é‡‘å®‰è£…' },
                
                // è¾…æè´¹
                elecAux: { name: 'æ°´ç”µè¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 6000, note: 'ç”µçº¿ã€æ°´ç®¡ã€å¼€å…³æ’åº§ã€é…ä»¶' },
                masonryAux: { name: 'æ³¥å·¥è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 3800, note: 'æ°´æ³¥ã€æ²³æ²™ã€ç“·ç –èƒ¶ã€é˜²æ°´æ¶‚æ–™' },
                carpentryAux: { name: 'æœ¨å·¥è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 2200, note: 'é¾™éª¨ã€çŸ³è†æ¿ã€æœ¨æ–¹ã€äº”é‡‘' },
                paintingAux: { name: 'æ²¹æ¼†è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 1500, note: 'è…»å­ç²‰ã€çŸ³è†ç²‰ã€ç•Œé¢å‰‚ã€ç½‘æ ¼å¸ƒ' },
                
                // ä¸»æè´¹
                floorTile: { name: 'å®¢å…åœ°ç –', unit: 'ã¡', baseQuantity: 45, quantityType: 'ratio', price: 80, note: 'é©¬å¯æ³¢ç½—ã€ä¸œé¹ç­‰å›½äº§å“ç‰Œ' },
                bedroomFloor: { name: 'å§å®¤åœ°æ¿', unit: 'ã¡', baseQuantity: 35, quantityType: 'ratio', price: 100, note: 'åœ£è±¡ã€å¤§è‡ªç„¶ç­‰å¼ºåŒ–åœ°æ¿' },
                kitchenTile: { name: 'å¨æˆ¿å¢™åœ°ç –', unit: 'ã¡', baseQuantity: 26, quantityType: 'ratio', price: 55, note: 'é˜²æ»‘ç –' },
                bathroomTile: { name: 'å«ç”Ÿé—´å¢™åœ°ç –', unit: 'ã¡', baseQuantity: 29, quantityType: 'ratio', price: 65, note: 'é˜²æ°´é˜²æ»‘ç –' },
                paint: { name: 'ä¹³èƒ¶æ¼†', unit: 'æ¡¶', baseQuantity: 5, quantityType: 'ratio', price: 400, note: 'å¤šä¹å£«ã€ç«‹é‚¦ç­‰' },
                door: { name: 'å®¤å†…é—¨', unit: 'å¥—', baseQuantity: 4, quantityType: 'fixed', price: 1000, note: 'TATAã€æ¢¦å¤©ç­‰' },
                window: { name: 'å°çª—', unit: 'ã¡', baseQuantity: 20, quantityType: 'ratio', price: 500, note: 'æ–­æ¡¥é“çª—' },
                cabinet: { name: 'æ©±æŸœ', unit: 'ç±³', baseQuantity: 5, quantityType: 'fixed', price: 1000, note: 'æ¬§æ´¾ã€å¿—é‚¦ç­‰' },
                wardrobe: { name: 'è¡£æŸœ', unit: 'ã¡', baseQuantity: 18, quantityType: 'ratio', price: 750, note: 'ç´¢è²äºšã€æ¬§æ´¾ç­‰' },
                bathroom: { name: 'å«æµ´æ´å…·', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 6500, note: 'é©¬æ¡¶ã€èŠ±æ´’ã€æµ´å®¤æŸœç­‰' },
                kitchen: { name: 'å¨æˆ¿ç”µå™¨', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 8000, note: 'æ²¹çƒŸæœºã€ç¶å…·ã€æ°´æ§½ç­‰' },
                lighting: { name: 'ç¯å…·', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 2000, note: 'å…¨å±‹ç¯å…·' },
                
                // å…¶ä»–è´¹ç”¨
                property: { name: 'ç‰©ä¸šè´¹ç”¨', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 2500, note: 'è£…ä¿®æŠ¼é‡‘+ç®¡ç†è´¹' },
                curtain: { name: 'çª—å¸˜', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 3000, note: 'å…¨å±‹çª—å¸˜' },
                cleaning: { name: 'æ£€æµ‹ä¿æ´', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 650, note: 'ç©ºæ°”æ£€æµ‹+å¼€è’ä¿æ´' },
                reserve: { name: 'æœºåŠ¨è´¹ç”¨', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 6000, note: 'é¢„ç•™5-10%åº”å¯¹çªå‘æƒ…å†µ' }
            },
            comfort: {
                demolition: { name: 'æ‹†é™¤æ¸…è¿', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 4200, note: 'å¢™ä½“æ‹†é™¤ã€åœ°é¢ç –æ‹†é™¤ã€åƒåœ¾æ¸…è¿' },
                electrical: { name: 'æ°´ç”µæ”¹é€ ', unit: 'ã¡', baseQuantity: 100, quantityType: 'area', price: 105, note: 'å¼ºç”µã€å¼±ç”µã€æ°´è·¯æ”¹é€ ã€é˜²æ°´' },
                masonry: { name: 'æ³¥å·¥æ–½å·¥', unit: 'ã¡', baseQuantity: 75, quantityType: 'ratio', price: 95, note: 'åœ°é¢æ‰¾å¹³ã€å¢™åœ°ç –é“ºè´´ã€ç Œå¢™' },
                carpentry: { name: 'æœ¨å·¥æ–½å·¥', unit: 'ã¡', baseQuantity: 40, quantityType: 'ratio', price: 110, note: 'åŠé¡¶ã€èƒŒæ™¯å¢™é€ å‹' },
                painting: { name: 'æ²¹æ¼†æ–½å·¥', unit: 'ã¡', baseQuantity: 230, quantityType: 'ratio', price: 37, note: 'å¢™é¢åŸºå±‚å¤„ç†ã€ä¹³èƒ¶æ¼†æ–½å·¥' },
                installation: { name: 'å®‰è£…ç±»', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 1600, note: 'æ´å…·ã€ç¯å…·ã€äº”é‡‘å®‰è£…' },
                
                elecAux: { name: 'æ°´ç”µè¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 8800, note: 'ç”µçº¿ã€æ°´ç®¡ã€å¼€å…³æ’åº§ã€é…ä»¶' },
                masonryAux: { name: 'æ³¥å·¥è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 5500, note: 'æ°´æ³¥ã€æ²³æ²™ã€ç“·ç –èƒ¶ã€é˜²æ°´æ¶‚æ–™' },
                carpentryAux: { name: 'æœ¨å·¥è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 3300, note: 'é¾™éª¨ã€çŸ³è†æ¿ã€æœ¨æ–¹ã€äº”é‡‘' },
                paintingAux: { name: 'æ²¹æ¼†è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 2300, note: 'è…»å­ç²‰ã€çŸ³è†ç²‰ã€ç•Œé¢å‰‚ã€ç½‘æ ¼å¸ƒ' },
                
                floorTile: { name: 'å®¢å…åœ°ç –', unit: 'ã¡', baseQuantity: 45, quantityType: 'ratio', price: 140, note: 'è¯ºè´å°”ã€é©¬å¯æ³¢ç½—ç­‰' },
                bedroomFloor: { name: 'å§å®¤åœ°æ¿', unit: 'ã¡', baseQuantity: 35, quantityType: 'ratio', price: 160, note: 'åœ£è±¡ã€å¤§è‡ªç„¶å®æœ¨å¤åˆ' },
                kitchenTile: { name: 'å¨æˆ¿å¢™åœ°ç –', unit: 'ã¡', baseQuantity: 26, quantityType: 'ratio', price: 95, note: 'é˜²æ»‘ç –' },
                bathroomTile: { name: 'å«ç”Ÿé—´å¢™åœ°ç –', unit: 'ã¡', baseQuantity: 29, quantityType: 'ratio', price: 115, note: 'é˜²æ°´é˜²æ»‘ç –' },
                paint: { name: 'ä¹³èƒ¶æ¼†', unit: 'æ¡¶', baseQuantity: 5, quantityType: 'ratio', price: 650, note: 'å¤šä¹å£«ã€ç«‹é‚¦é«˜ç«¯ç³»åˆ—' },
                door: { name: 'å®¤å†…é—¨', unit: 'å¥—', baseQuantity: 4, quantityType: 'fixed', price: 1600, note: 'TATAã€æ¢¦å¤©ç­‰' },
                window: { name: 'å°çª—', unit: 'ã¡', baseQuantity: 20, quantityType: 'ratio', price: 750, note: 'æ–­æ¡¥é“çª—' },
                cabinet: { name: 'æ©±æŸœ', unit: 'ç±³', baseQuantity: 5, quantityType: 'fixed', price: 1600, note: 'æ¬§æ´¾ã€å¿—é‚¦ç­‰' },
                wardrobe: { name: 'è¡£æŸœ', unit: 'ã¡', baseQuantity: 18, quantityType: 'ratio', price: 1200, note: 'ç´¢è²äºšã€æ¬§æ´¾ç­‰' },
                bathroom: { name: 'å«æµ´æ´å…·', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 12000, note: 'ç®­ç‰Œã€ä¹ç‰§ç­‰' },
                kitchen: { name: 'å¨æˆ¿ç”µå™¨', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 15000, note: 'æ–¹å¤ªã€è€æ¿ç­‰' },
                lighting: { name: 'ç¯å…·', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 4200, note: 'å…¨å±‹ç¯å…·' },
                
                property: { name: 'ç‰©ä¸šè´¹ç”¨', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 3000, note: 'è£…ä¿®æŠ¼é‡‘+ç®¡ç†è´¹' },
                curtain: { name: 'çª—å¸˜', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 6000, note: 'å…¨å±‹çª—å¸˜' },
                cleaning: { name: 'æ£€æµ‹ä¿æ´', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 800, note: 'ç©ºæ°”æ£€æµ‹+å¼€è’ä¿æ´' },
                reserve: { name: 'æœºåŠ¨è´¹ç”¨', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 10000, note: 'é¢„ç•™5-10%åº”å¯¹çªå‘æƒ…å†µ' }
            },
            luxury: {
                demolition: { name: 'æ‹†é™¤æ¸…è¿', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 5500, note: 'å¢™ä½“æ‹†é™¤ã€åœ°é¢ç –æ‹†é™¤ã€åƒåœ¾æ¸…è¿' },
                electrical: { name: 'æ°´ç”µæ”¹é€ ', unit: 'ã¡', baseQuantity: 100, quantityType: 'area', price: 145, note: 'å¼ºç”µã€å¼±ç”µã€æ°´è·¯æ”¹é€ ã€é˜²æ°´' },
                masonry: { name: 'æ³¥å·¥æ–½å·¥', unit: 'ã¡', baseQuantity: 75, quantityType: 'ratio', price: 120, note: 'åœ°é¢æ‰¾å¹³ã€å¢™åœ°ç –é“ºè´´ã€ç Œå¢™' },
                carpentry: { name: 'æœ¨å·¥æ–½å·¥', unit: 'ã¡', baseQuantity: 40, quantityType: 'ratio', price: 130, note: 'åŠé¡¶ã€èƒŒæ™¯å¢™é€ å‹' },
                painting: { name: 'æ²¹æ¼†æ–½å·¥', unit: 'ã¡', baseQuantity: 230, quantityType: 'ratio', price: 48, note: 'å¢™é¢åŸºå±‚å¤„ç†ã€ä¹³èƒ¶æ¼†æ–½å·¥' },
                installation: { name: 'å®‰è£…ç±»', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 2200, note: 'æ´å…·ã€ç¯å…·ã€äº”é‡‘å®‰è£…' },
                
                elecAux: { name: 'æ°´ç”µè¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 12000, note: 'ç”µçº¿ã€æ°´ç®¡ã€å¼€å…³æ’åº§ã€é…ä»¶' },
                masonryAux: { name: 'æ³¥å·¥è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 7800, note: 'æ°´æ³¥ã€æ²³æ²™ã€ç“·ç –èƒ¶ã€é˜²æ°´æ¶‚æ–™' },
                carpentryAux: { name: 'æœ¨å·¥è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 4800, note: 'é¾™éª¨ã€çŸ³è†æ¿ã€æœ¨æ–¹ã€äº”é‡‘' },
                paintingAux: { name: 'æ²¹æ¼†è¾…æ', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 3500, note: 'è…»å­ç²‰ã€çŸ³è†ç²‰ã€ç•Œé¢å‰‚ã€ç½‘æ ¼å¸ƒ' },
                
                floorTile: { name: 'å®¢å…åœ°ç –', unit: 'ã¡', baseQuantity: 45, quantityType: 'ratio', price: 260, note: 'è¿›å£ç“·ç –ã€é«˜ç«¯å“ç‰Œ' },
                bedroomFloor: { name: 'å§å®¤åœ°æ¿', unit: 'ã¡', baseQuantity: 35, quantityType: 'ratio', price: 300, note: 'å®æœ¨åœ°æ¿' },
                kitchenTile: { name: 'å¨æˆ¿å¢™åœ°ç –', unit: 'ã¡', baseQuantity: 26, quantityType: 'ratio', price: 180, note: 'é«˜ç«¯é˜²æ»‘ç –' },
                bathroomTile: { name: 'å«ç”Ÿé—´å¢™åœ°ç –', unit: 'ã¡', baseQuantity: 29, quantityType: 'ratio', price: 220, note: 'é«˜ç«¯é˜²æ°´é˜²æ»‘ç –' },
                paint: { name: 'ä¹³èƒ¶æ¼†', unit: 'æ¡¶', baseQuantity: 5, quantityType: 'ratio', price: 1100, note: 'è¿›å£å“ç‰Œ' },
                door: { name: 'å®¤å†…é—¨', unit: 'å¥—', baseQuantity: 4, quantityType: 'fixed', price: 3000, note: 'é«˜ç«¯å®æœ¨é—¨' },
                window: { name: 'å°çª—', unit: 'ã¡', baseQuantity: 20, quantityType: 'ratio', price: 1200, note: 'ç³»ç»Ÿçª—' },
                cabinet: { name: 'æ©±æŸœ', unit: 'ç±³', baseQuantity: 5, quantityType: 'fixed', price: 3000, note: 'é«˜ç«¯å®šåˆ¶' },
                wardrobe: { name: 'è¡£æŸœ', unit: 'ã¡', baseQuantity: 18, quantityType: 'ratio', price: 2100, note: 'é«˜ç«¯å®šåˆ¶' },
                bathroom: { name: 'å«æµ´æ´å…·', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 25000, note: 'TOTOã€ç§‘å‹’ç­‰' },
                kitchen: { name: 'å¨æˆ¿ç”µå™¨', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 32000, note: 'æ–¹å¤ªã€è¥¿é—¨å­ç­‰é«˜ç«¯ç³»åˆ—' },
                lighting: { name: 'ç¯å…·', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 10000, note: 'æ™ºèƒ½ç…§æ˜ç³»ç»Ÿ' },
                
                property: { name: 'ç‰©ä¸šè´¹ç”¨', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 3500, note: 'è£…ä¿®æŠ¼é‡‘+ç®¡ç†è´¹' },
                curtain: { name: 'çª—å¸˜', unit: 'å¥—', baseQuantity: 1, quantityType: 'fixed', price: 11000, note: 'é«˜ç«¯çª—å¸˜' },
                cleaning: { name: 'æ£€æµ‹ä¿æ´', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 1100, note: 'ç©ºæ°”æ£€æµ‹+å¼€è’ä¿æ´' },
                reserve: { name: 'æœºåŠ¨è´¹ç”¨', unit: 'é¡¹', baseQuantity: 1, quantityType: 'fixed', price: 16000, note: 'é¢„ç•™5-10%åº”å¯¹çªå‘æƒ…å†µ' }
            }
        };
        
        // å½“å‰é€‰æ‹©çš„æ¡£æ¬¡å’Œé¢ç§¯
        let currentLevel = 'comfort';
        let currentArea = 100;
        
        // åˆå§‹åŒ–
        function init() {
            generateTable();
            calculate();
            
            // ç›‘å¬é¢ç§¯å˜åŒ–
            document.getElementById('area').addEventListener('input', function() {
                currentArea = parseFloat(this.value) || 100;
                updateQuantitiesByArea();
                calculate();
            });
            
            // ç›‘å¬æ¡£æ¬¡å˜åŒ–
            document.getElementById('level').addEventListener('change', function() {
                currentLevel = this.value;
                generateTable();
                calculate();
            });
        }
        
        // æ ¹æ®é¢ç§¯æ›´æ–°å·¥ç¨‹é‡
        function updateQuantitiesByArea() {
            const data = baseData[currentLevel];
            const areaRatio = currentArea / 100; // åŸºäº100å¹³ç±³çš„æ¯”ä¾‹
            
            Object.keys(data).forEach(key => {
                const item = data[key];
                const quantityInput = document.querySelector(`.quantity[data-key="${key}"]`);
                
                if (quantityInput) {
                    let newQuantity = item.baseQuantity;
                    
                    // æ ¹æ®ä¸åŒç±»å‹è°ƒæ•´å·¥ç¨‹é‡
                    if (item.quantityType === 'area') {
                        // ç›´æ¥æŒ‰é¢ç§¯è®¡ç®—ï¼ˆå¦‚æ°´ç”µæ”¹é€ ï¼‰
                        newQuantity = currentArea;
                    } else if (item.quantityType === 'ratio') {
                        // æŒ‰æ¯”ä¾‹è®¡ç®—ï¼ˆå¦‚åœ°ç –ã€å¢™é¢ç­‰ï¼‰
                        newQuantity = item.baseQuantity * areaRatio;
                    } else if (item.quantityType === 'fixed') {
                        // å›ºå®šæ•°é‡ï¼ˆå¦‚é—¨ã€å¥—ä»¶ç­‰ï¼‰
                        newQuantity = item.baseQuantity;
                    }
                    
                    quantityInput.value = newQuantity.toFixed(2);
                }
            });
        }
        
        // ç”Ÿæˆè¡¨æ ¼
        function generateTable() {
            const data = baseData[currentLevel];
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            let index = 1;
            
            // äººå·¥è´¹
            addCategoryRow(tbody, 'ä¸€ã€äººå·¥è´¹');
            index = addDataRows(tbody, data, ['demolition', 'electrical', 'masonry', 'carpentry', 'painting', 'installation'], index);
            addSubtotalRow(tbody, 'laborSubtotal', 'äººå·¥è´¹å°è®¡');
            
            // è¾…æè´¹
            addCategoryRow(tbody, 'äºŒã€è¾…æè´¹');
            index = addDataRows(tbody, data, ['elecAux', 'masonryAux', 'carpentryAux', 'paintingAux'], index);
            addSubtotalRow(tbody, 'auxSubtotal', 'è¾…æè´¹å°è®¡');
            
            // ä¸»æè´¹
            addCategoryRow(tbody, 'ä¸‰ã€ä¸»æè´¹');
            index = addDataRows(tbody, data, ['floorTile', 'bedroomFloor', 'kitchenTile', 'bathroomTile', 'paint', 'door', 'window', 'cabinet', 'wardrobe', 'bathroom', 'kitchen', 'lighting'], index);
            addSubtotalRow(tbody, 'mainSubtotal', 'ä¸»æè´¹å°è®¡');
            
            // å…¶ä»–è´¹ç”¨
            addCategoryRow(tbody, 'å››ã€å…¶ä»–è´¹ç”¨');
            index = addDataRows(tbody, data, ['property', 'curtain', 'cleaning', 'reserve'], index);
            addSubtotalRow(tbody, 'otherSubtotal', 'å…¶ä»–è´¹ç”¨å°è®¡');
            
            // æ€»è®¡
            addTotalRow(tbody);
            
            // åˆå§‹åŒ–å·¥ç¨‹é‡
            updateQuantitiesByArea();
        }
        
        function addCategoryRow(tbody, title) {
            const tr = document.createElement('tr');
            tr.className = 'category-row';
            tr.innerHTML = `<td colspan="7">${title}</td>`;
            tbody.appendChild(tr);
        }
        
        function addDataRows(tbody, data, keys, startIndex) {
            let index = startIndex;
            const areaRatio = currentArea / 100;
            
            keys.forEach(key => {
                const item = data[key];
                
                // æ ¹æ®é¢ç§¯è®¡ç®—åˆå§‹å·¥ç¨‹é‡
                let quantity = item.baseQuantity;
                if (item.quantityType === 'area') {
                    quantity = currentArea;
                } else if (item.quantityType === 'ratio') {
                    quantity = item.baseQuantity * areaRatio;
                }
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${index}</td>
                    <td>${item.name}</td>
                    <td>${item.unit}</td>
                    <td class="editable">
                        <input type="number" class="quantity" data-key="${key}" value="${quantity.toFixed(2)}" step="0.1" onchange="calculate()">
                    </td>
                    <td class="editable">
                        <input type="number" class="price" data-key="${key}" value="${item.price}" step="1" onchange="calculate()">
                    </td>
                    <td class="calculated subtotal-${key}">0</td>
                    <td>${item.note}</td>
                `;
                tbody.appendChild(tr);
                index++;
            });
            return index;
        }
        
        function addSubtotalRow(tbody, id, title) {
            const tr = document.createElement('tr');
            tr.className = 'subtotal-row';
            tr.innerHTML = `
                <td colspan="5" style="text-align: right; padding-right: 20px;">${title}</td>
                <td class="calculated" id="${id}">0</td>
                <td></td>
            `;
            tbody.appendChild(tr);
        }
        
        function addTotalRow(tbody) {
            const tr = document.createElement('tr');
            tr.className = 'total-row';
            tr.innerHTML = `
                <td colspan="5" style="text-align: right; padding-right: 20px;">ã€æ€»é¢„ç®—ã€‘</td>
                <td id="tableTotal">0</td>
                <td></td>
            `;
            tbody.appendChild(tr);
        }
        
        // è®¡ç®—é¢„ç®—
        function calculate() {
            let laborTotal = 0;
            let auxTotal = 0;
            let mainTotal = 0;
            let otherTotal = 0;
            
            // éå†æ‰€æœ‰è¾“å…¥æ¡†è®¡ç®—å°è®¡
            document.querySelectorAll('.quantity').forEach(input => {
                const key = input.dataset.key;
                const quantity = parseFloat(input.value) || 0;
                const priceInput = document.querySelector(`.price[data-key="${key}"]`);
                const price = parseFloat(priceInput.value) || 0;
                const subtotal = quantity * price;
                
                // æ›´æ–°å°è®¡æ˜¾ç¤º
                const subtotalCell = document.querySelector(`.subtotal-${key}`);
                if (subtotalCell) {
                    subtotalCell.textContent = subtotal.toFixed(2);
                }
                
                // ç´¯è®¡åˆ°å¯¹åº”åˆ†ç±»
                if (['demolition', 'electrical', 'masonry', 'carpentry', 'painting', 'installation'].includes(key)) {
                    laborTotal += subtotal;
                } else if (['elecAux', 'masonryAux', 'carpentryAux', 'paintingAux'].includes(key)) {
                    auxTotal += subtotal;
                } else if (['floorTile', 'bedroomFloor', 'kitchenTile', 'bathroomTile', 'paint', 'door', 'window', 'cabinet', 'wardrobe', 'bathroom', 'kitchen', 'lighting'].includes(key)) {
                    mainTotal += subtotal;
                } else if (['property', 'curtain', 'cleaning', 'reserve'].includes(key)) {
                    otherTotal += subtotal;
                }
            });
            
            const totalBudget = laborTotal + auxTotal + mainTotal + otherTotal;
            
            // æ›´æ–°å°è®¡
            document.getElementById('laborSubtotal').textContent = laborTotal.toFixed(2);
            document.getElementById('auxSubtotal').textContent = auxTotal.toFixed(2);
            document.getElementById('mainSubtotal').textContent = mainTotal.toFixed(2);
            document.getElementById('otherSubtotal').textContent = otherTotal.toFixed(2);
            document.getElementById('tableTotal').textContent = totalBudget.toFixed(2);
            
            // æ›´æ–°æ±‡æ€»å¡ç‰‡
            document.getElementById('totalBudget').textContent = 'Â¥' + totalBudget.toLocaleString('zh-CN', {maximumFractionDigits: 0});
            document.getElementById('laborTotal').textContent = 'Â¥' + laborTotal.toLocaleString('zh-CN', {maximumFractionDigits: 0});
            document.getElementById('auxTotal').textContent = 'Â¥' + auxTotal.toLocaleString('zh-CN', {maximumFractionDigits: 0});
            document.getElementById('mainTotal').textContent = 'Â¥' + mainTotal.toLocaleString('zh-CN', {maximumFractionDigits: 0});
            document.getElementById('otherTotal').textContent = 'Â¥' + otherTotal.toLocaleString('zh-CN', {maximumFractionDigits: 0});
            
            // æ›´æ–°ç™¾åˆ†æ¯”
            if (totalBudget > 0) {
                document.getElementById('laborPercent').textContent = ((laborTotal / totalBudget) * 100).toFixed(1) + '%';
                document.getElementById('auxPercent').textContent = ((auxTotal / totalBudget) * 100).toFixed(1) + '%';
                document.getElementById('mainPercent').textContent = ((mainTotal / totalBudget) * 100).toFixed(1) + '%';
                document.getElementById('otherPercent').textContent = ((otherTotal / totalBudget) * 100).toFixed(1) + '%';
            }
            
            // æ›´æ–°å¹³ç±³å•ä»·
            const pricePerSqm = totalBudget / currentArea;
            document.getElementById('pricePerSqm').textContent = pricePerSqm.toLocaleString('zh-CN', {maximumFractionDigits: 0});
        }
        
        // é‡ç½®ä¸ºé»˜è®¤å€¼
        function resetDefault() {
            if (confirm('ç¡®å®šè¦æ¢å¤é»˜è®¤å€¼å—ï¼Ÿæ‰€æœ‰ä¿®æ”¹å°†ä¸¢å¤±ã€‚')) {
                document.getElementById('area').value = 100;
                document.getElementById('level').value = 'comfort';
                currentLevel = 'comfort';
                currentArea = 100;
                generateTable();
                calculate();
            }
        }
        
        // å¯¼å‡ºä¸ºExcelï¼ˆCSVæ ¼å¼ï¼‰
        function exportToExcel() {
            let csv = 'è‡ªè£…é¢„ç®—è¡¨\n\n';
            csv += 'å»ºç­‘é¢ç§¯ï¼š' + currentArea + 'å¹³ç±³\n';
            csv += 'è£…ä¿®æ¡£æ¬¡ï¼š' + document.getElementById('level').selectedOptions[0].text + '\n\n';
            csv += 'åºå·,é¡¹ç›®åç§°,å•ä½,å·¥ç¨‹é‡,å•ä»·ï¼ˆå…ƒï¼‰,å°è®¡ï¼ˆå…ƒï¼‰,å¤‡æ³¨è¯´æ˜\n';
            
            const table = document.getElementById('budgetTable');
            const rows = table.querySelectorAll('tbody tr');
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length > 1) {
                    let rowData = [];
                    cells.forEach(cell => {
                        let text = cell.textContent.trim();
                        // å¤„ç†è¾“å…¥æ¡†
                        const input = cell.querySelector('input');
                        if (input) {
                            text = input.value;
                        }
                        // è½¬ä¹‰é€—å·å’Œå¼•å·
                        if (text.includes(',') || text.includes('"') || text.includes('\n')) {
                            text = '"' + text.replace(/"/g, '""') + '"';
                        }
                        rowData.push(text);
                    });
                    csv += rowData.join(',') + '\n';
                }
            });
            
            // æ·»åŠ æ±‡æ€»ä¿¡æ¯
            csv += '\næ±‡æ€»ä¿¡æ¯\n';
            csv += 'æ€»é¢„ç®—,' + document.getElementById('totalBudget').textContent + '\n';
            csv += 'äººå·¥è´¹,' + document.getElementById('laborTotal').textContent + ',' + document.getElementById('laborPercent').textContent + '\n';
            csv += 'è¾…æè´¹,' + document.getElementById('auxTotal').textContent + ',' + document.getElementById('auxPercent').textContent + '\n';
            csv += 'ä¸»æè´¹,' + document.getElementById('mainTotal').textContent + ',' + document.getElementById('mainPercent').textContent + '\n';
            csv += 'å…¶ä»–è´¹ç”¨,' + document.getElementById('otherTotal').textContent + ',' + document.getElementById('otherPercent').textContent + '\n';
            csv += 'å¹³ç±³å•ä»·,' + document.getElementById('pricePerSqm').textContent + 'å…ƒ/ã¡\n';
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', currentArea + 'å¹³ç±³è‡ªè£…é¢„ç®—è¡¨_' + new Date().toLocaleDateString() + '.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        function saveToLocalStorage() {
            const data = {
                level: currentLevel,
                area: currentArea,
                customData: {}
            };
            
            // ä¿å­˜æ‰€æœ‰è‡ªå®šä¹‰æ•°æ®
            document.querySelectorAll('.quantity').forEach(input => {
                const key = input.dataset.key;
                data.customData[key] = {
                    quantity: parseFloat(input.value),
                    price: parseFloat(document.querySelector(`.price[data-key="${key}"]`).value)
                };
            });
            
            localStorage.setItem('budgetData', JSON.stringify(data));
            alert('é¢„ç®—æ•°æ®å·²ä¿å­˜ï¼');
        }
        
        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½
        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('budgetData');
            if (savedData) {
                const data = JSON.parse(savedData);
                currentLevel = data.level;
                currentArea = data.area;
                
                document.getElementById('level').value = currentLevel;
                document.getElementById('area').value = currentArea;
                
                generateTable();
                
                // æ¢å¤è‡ªå®šä¹‰æ•°æ®
                Object.keys(data.customData).forEach(key => {
                    const quantityInput = document.querySelector(`.quantity[data-key="${key}"]`);
                    const priceInput = document.querySelector(`.price[data-key="${key}"]`);
                    
                    if (quantityInput && data.customData[key].quantity !== undefined) {
                        quantityInput.value = data.customData[key].quantity;
                    }
                    if (priceInput && data.customData[key].price !== undefined) {
                        priceInput.value = data.customData[key].price;
                    }
                });
                
                calculate();
                alert('é¢„ç®—æ•°æ®å·²åŠ è½½ï¼');
            } else {
                alert('æ²¡æœ‰æ‰¾åˆ°ä¿å­˜çš„æ•°æ®ï¼');
            }
        }
        
        // æ¸…é™¤æœ¬åœ°å­˜å‚¨
        function clearLocalStorage() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„æ•°æ®å—ï¼Ÿ')) {
                localStorage.removeItem('budgetData');
                alert('ä¿å­˜çš„æ•°æ®å·²æ¸…é™¤ï¼');
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = init;
    </script>


</body></html>